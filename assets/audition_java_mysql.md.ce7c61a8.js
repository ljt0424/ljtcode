import{_ as s,o as a,c as n,U as l}from"./chunks/framework.afdf1834.js";const i=JSON.parse('{"title":"mysql","description":"","frontmatter":{},"headers":[],"relativePath":"audition/java/mysql.md","filePath":"audition/java/mysql.md","lastUpdated":null}'),p={name:"audition/java/mysql.md"},o=l(`<h1 id="mysql" tabindex="-1">mysql <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;mysql&quot;">​</a></h1><p>关系型数据库，建立在关系模型基础上，由多张相互连接的二维表组成的数据库</p><ul><li>创建 create database mydatebase</li><li>删除 drop database mydatebase</li><li>查询 <ol><li>select database()</li><li>show databases</li></ol></li><li>使用 use 名字</li></ul><h2 id="sql语句被分为四大类" tabindex="-1">SQL语句被分为四大类 <a class="header-anchor" href="#sql语句被分为四大类" aria-label="Permalink to &quot;SQL语句被分为四大类&quot;">​</a></h2><ul><li>DDL 数据定义语言</li><li>DML 数据操作语言</li><li>DQL 数据查询语言</li><li>DCL 数据控制语言</li></ul><h2 id="ddl" tabindex="-1">DDL <a class="header-anchor" href="#ddl" aria-label="Permalink to &quot;DDL&quot;">​</a></h2><p>创建</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">tb_user</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    id </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> comment </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ID, 唯一表示</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    username </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">姓名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    age </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> comment </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">年龄</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    gender </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">性别</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">) comment </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">用户表</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><p>约束</p><ul><li>非空约束 not null</li><li>唯一约束 unique</li><li>主键约束 primary key</li><li>默认约束 default</li><li>外键约束 foreign key</li></ul><h2 id="常见数据类型" tabindex="-1">常见数据类型 <a class="header-anchor" href="#常见数据类型" aria-label="Permalink to &quot;常见数据类型&quot;">​</a></h2><p>tinyint 1 smallint 2 mediumint 3 int 4 bigint 8 float 4 double 8 decimal</p><p>char 定长字符串 varchar 变长字符串</p><h2 id="dml语法" tabindex="-1">DML语法 <a class="header-anchor" href="#dml语法" aria-label="Permalink to &quot;DML语法&quot;">​</a></h2><ul><li>增</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;"># 插入字段</span></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> tb_emp(username,</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">,gender,create_time,update_time) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sst</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">吕江涛</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> tb_emp(id, username, </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, gender, </span><span style="color:#F78C6C;">image</span><span style="color:#A6ACCD;">, job, entrydate, create_time, update_time) </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ljt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">帅帅涛</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.jpg</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2010-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">insert into</span><span style="color:#A6ACCD;"> tb_emp(username,</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">,gender,create_time,update_time) </span><span style="color:#F78C6C;">values</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">wwt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">吕江涛</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">),(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cct</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">cc涛</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">);</span></span></code></pre></div><ul><li>改</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eet</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> ,update_time </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> entrydate </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2023-07-07</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,update_time </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>删</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><h2 id="dql" tabindex="-1">DQL <a class="header-anchor" href="#dql" aria-label="Permalink to &quot;DQL&quot;">​</a></h2><ul><li>select 字段列表</li><li>from 表名列表</li><li>where 条件列表</li><li>group by 分组字段列表</li><li>having 分组后条件列表</li><li>order by 排序字段列表</li><li>limit 分页参数</li></ul><h2 id="dql基本查询" tabindex="-1">DQL基本查询 <a class="header-anchor" href="#dql基本查询" aria-label="Permalink to &quot;DQL基本查询&quot;">​</a></h2><p>select、from</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">,entrydate </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id, username, </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">, gender, </span><span style="color:#F78C6C;">image</span><span style="color:#A6ACCD;">, job, entrydate, create_time, update_time </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;        </span><span style="color:#676E95;font-style:italic;">-- 查所有</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 姓名,entrydate </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 入职日期 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">姓 名</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,entrydate </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> 入职日期 </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select distinct</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;  </span><span style="color:#676E95;font-style:italic;">--筛选掉重复的</span></span></code></pre></div><p>where</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">吕江涛</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">is not null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> entrydate</span><span style="color:#89DDFF;">&gt;=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2000-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> entrydate</span><span style="color:#89DDFF;">&lt;=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2023-08-08</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> entrydate </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2000-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2023-08-08</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> entrydate </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2000-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2023-08-08</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> gender</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">___</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;  </span><span style="color:#676E95;font-style:italic;">-- 查询三个字符的名字的员工，_ 匹配单个字符</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">吕%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;  </span><span style="color:#676E95;font-style:italic;">-- 查询姓吕的员工，% 匹配任意字符</span></span></code></pre></div><p>group by</p><ul><li>聚合函数，将一列数据作为一个整体纵向计算，null不参与计算 <ul><li>count 不计算null，只计算非空</li><li>max</li><li>min</li><li>avg</li><li>sum</li></ul></li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">min</span><span style="color:#A6ACCD;">(entrydate) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(entrydate) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(entrydate) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sum</span><span style="color:#A6ACCD;">(entrydate) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span></code></pre></div><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> gender,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> gender;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> job,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> entrydate</span><span style="color:#89DDFF;">&lt;=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2023-08-08</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;  </span><span style="color:#676E95;font-style:italic;">-- 分组之后进行条件的过滤要写在having之后</span></span></code></pre></div><h2 id="where和having的区别" tabindex="-1">where和having的区别 <a class="header-anchor" href="#where和having的区别" aria-label="Permalink to &quot;where和having的区别&quot;">​</a></h2><ul><li>执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤</li><li>判断条件不同：where不能对聚合函数进行判断，而having可以</li></ul><h2 id="执行顺序" tabindex="-1">执行顺序 <a class="header-anchor" href="#执行顺序" aria-label="Permalink to &quot;执行顺序&quot;">​</a></h2><p>where &gt; 聚合函数 &gt; having</p><h2 id="排序查询" tabindex="-1">排序查询 <a class="header-anchor" href="#排序查询" aria-label="Permalink to &quot;排序查询&quot;">​</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> entrydate </span><span style="color:#F78C6C;">asc</span><span style="color:#A6ACCD;"> ; </span><span style="color:#676E95;font-style:italic;">-- 升序默认</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> entrydate </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> entrydate,update_time </span><span style="color:#F78C6C;">desc</span><span style="color:#A6ACCD;"> ; </span><span style="color:#676E95;font-style:italic;">-- entrydate相同，根据update_time降序</span></span></code></pre></div><h2 id="分页查询" tabindex="-1">分页查询 <a class="header-anchor" href="#分页查询" aria-label="Permalink to &quot;分页查询&quot;">​</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><ul><li>起始索引从0开始 起始索引 = （查询页码-1）*每页显示记录数</li><li>mysql是limit 不同的数据库不同</li><li>查询第一页索引可以省略不写</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp</span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">吕%</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> gender </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> entrydate </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2000-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2023-08-08</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">order by</span><span style="color:#A6ACCD;"> update_time </span><span style="color:#F78C6C;">desc</span></span>
<span class="line"><span style="color:#F78C6C;">limit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- if</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">if</span><span style="color:#A6ACCD;">(gender</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">男</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">女</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">),</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> gender;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- case</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">case</span><span style="color:#A6ACCD;"> job </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">学生</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">社会人</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;"> ), </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp</span></span>
<span class="line"><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> job;</span></span></code></pre></div><h2 id="多表" tabindex="-1">多表 <a class="header-anchor" href="#多表" aria-label="Permalink to &quot;多表&quot;">​</a></h2><ul><li>外键关联一对一，基本都用逻辑外连接</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">constraint</span><span style="color:#A6ACCD;"> fk_user_id </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (user_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> tb_user(id);</span></span></code></pre></div><ul><li>逻辑外连接 字段名写为<code>要关联的表_要关联的表的字段</code>这样会自动关联</li></ul><h2 id="多表查询" tabindex="-1">多表查询 <a class="header-anchor" href="#多表查询" aria-label="Permalink to &quot;多表查询&quot;">​</a></h2><ul><li>内连接</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> tb_dept.name,tb_emp.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_dept,tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> tb_dept.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> tb_emp.id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp e,tb_dept d </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> e.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d.id;    </span><span style="color:#676E95;font-style:italic;">-- 隐式内连接</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> tb_emp.name,tb_dept.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">inner join</span><span style="color:#A6ACCD;"> tb_dept </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tb_dept.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> tb_emp.id;  </span><span style="color:#676E95;font-style:italic;">-- 显示内连接，inner可写可不写</span></span></code></pre></div><ul><li>外连接</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.name,td.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp e </span><span style="color:#F78C6C;">left join</span><span style="color:#A6ACCD;"> tb_dept td </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> e.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> td.id;  </span><span style="color:#676E95;font-style:italic;">--左外连接，完全包含左表，和两表交集</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.name,td.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp e </span><span style="color:#F78C6C;">right join</span><span style="color:#A6ACCD;"> tb_dept td </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> e.dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> td.id;  </span><span style="color:#676E95;font-style:italic;">--右外连接，完全包含右表，和两表交集</span></span></code></pre></div><ul><li>子查询</li></ul><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp</span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> tb_dept.name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">学生</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> dept_id </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> id </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> tb_dept.name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">老师</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)  </span><span style="color:#676E95;font-style:italic;">-- 列子查询</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> (entrydate,job) </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> entrydate,job </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">吕江涛</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">--行子查询</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> e.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">,d.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> entrydate </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2012-01-01</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) e ,tb_dept d </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> d.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> e.dept_id;  </span><span style="color:#676E95;font-style:italic;">--表子查询</span></span></code></pre></div><h2 id="多表查询案例" tabindex="-1">多表查询案例 <a class="header-anchor" href="#多表查询案例" aria-label="Permalink to &quot;多表查询案例&quot;">​</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 多表查询</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询价格低于10元的菜品name，price，和对应的菜品分类名称</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> d.name,d.price,(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> category </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> category_id</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">category.id) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish d </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> d.price</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> d.name,d.price,c.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish d,category c </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> c.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d.category_id </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> d.price</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询价格在10-50之间起售的商品</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> d.name,d.price,c.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish d ,category c </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> c.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d.category_id </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> d.status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> d.price </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;"> ;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> d.name,d.price,c.name </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish d </span><span style="color:#F78C6C;">left join</span><span style="color:#A6ACCD;"> category c </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> d.category_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> c.id </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> d.price </span><span style="color:#F78C6C;">between</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> d.status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询不同类别的菜品的最大价格</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> c.name,</span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(d.price) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish d ,category c </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> c.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d.category_id </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> c.name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询状态为起售且菜品数量大于3的种类名称</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> c.name,</span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish d ,category c </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> c.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> d.category_id </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;">  d.status </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">group by</span><span style="color:#A6ACCD;"> c.name </span><span style="color:#F78C6C;">having</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询商务套餐a中包含了那些菜品</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 套餐和菜品是多对多的关系，需要通过中间表setmeal_dish查询对应关系</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> s.name, s.price, d.name, d.price, sd.copies</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> setmeal s,</span></span>
<span class="line"><span style="color:#A6ACCD;">     setmeal_dish sd,</span></span>
<span class="line"><span style="color:#A6ACCD;">     dish d</span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> s.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sd.setmeal_id</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> d.id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> sd.dish_id</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> s.name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">商务套餐A</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 查询低于平均价格的菜品name，price</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> d.name, d.price </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish d </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> d.price </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">avg</span><span style="color:#A6ACCD;">(price) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> dish)</span></span></code></pre></div><h2 id="事务" tabindex="-1">事务 <a class="header-anchor" href="#事务" aria-label="Permalink to &quot;事务&quot;">​</a></h2><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 开启事务</span></span>
<span class="line"><span style="color:#F78C6C;">start transaction</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">-- begin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 执行删除操作</span></span>
<span class="line"><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_dept </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 提交事务</span></span>
<span class="line"><span style="color:#F78C6C;">commit</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 回滚事务,撤回删除</span></span>
<span class="line"><span style="color:#F78C6C;">rollback</span></span></code></pre></div><ul><li>原子性，事务是不可分割的最小单元，要么全部成功，要么全部失败</li><li>一致性，事务完成时，必须使所有数据都保持一致状态</li><li>隔离性，数据库系统提供的隔离机制，保证事务在不受外部操作影响的独立环境下运行</li><li>持久性，事务一旦提交或回滚，它对数据库的数据改变就是永久的</li></ul><h2 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h2><p>结构： 默认B+Tree（多路平衡搜索树）结构组织索引</p><p>为什么不用二叉树或者红黑树：大数据量情况下，层级深，检索速度越慢</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">-- 创建</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">idx_emp_name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tb_emp(</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">--查询</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> tb_emp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">-- 删除</span></span>
<span class="line"><span style="color:#F78C6C;">drop</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">index</span><span style="color:#A6ACCD;"> idx_emp_name </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> tb_emp</span></span></code></pre></div>`,61),e=[o];function t(C,c,r,y,A,D){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{i as __pageData,d as default};
